<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>CÔNG CỤ HỖ TRỢ TÍNH TOÁN DCS</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: blue; text-align: center; font-size: 20px; }
    h2 { color: blue; text-align: center; font-size: 18px; }
    .time { text-align: right; font-size: 14px; }
    .menu button { margin: 5px; padding: 10px; }
    .page { display: none; }
  </style>
</head>
<body>

<!-- ===== HEADER CHUNG ===== -->
<h1>CÔNG CỤ HỖ TRỢ TÍNH TOÁN-CHUYỂN ĐỔI THÔNG SỐ DCS</h1>
<div class="time" id="time"></div>

<!-- ===== TRANG CHÍNH ===== -->
<div id="home" class="page" style="display:block">
  <h2>Trang chính</h2>
  <div class="menu">
    <button onclick="showPage('temp')">Tính toán nhiệt độ</button>
    <button onclick="showPage('dcs')">Module Analog DCS</button>
    <button onclick="showPage('plc_i')">PLC Analog đo dòng</button>
    <button onclick="showPage('plc_v')">PLC Analog đo áp</button>
  </div>
</div>

<!-- ===== TRANG NHIỆT ĐỘ ===== -->
<div id="temp" class="page">
  <h2>TÍNH TOÁN CHUYỂN ĐỔI NHIỆT ĐỘ PT100, TC K</h2>
  <p><b>PT100 3 dây</b></p>
  Rab: <input id="rab"> Rbc: <input id="rbc">
  <button onclick="calcPT100()">Tính</button>
  <p id="pt100_rs"></p>

  <p><b>TC loại K</b></p>
  mV: <input id="mv"> Nhiệt độ môi trường (°C): <input id="amb">
  <button onclick="calcTC()">Tính</button>
  <p id="tc_rs"></p>

  <button onclick="showPage('home')">Quay lại</button>
</div>

<!-- ===== TRANG DCS ===== -->
<div id="dcs" class="page">
  <h2>TÍNH TOÁN MODULE ANALOG DCS</h2>
  Zero: <input id="z1"> Span: <input id="s1">
  <button onclick="calcAB()">Tính a,b</button>
  <p id="ab_rs"></p>

  <button onclick="showPage('home')">Quay lại</button>
</div>

<!-- ===== PLC DÒNG ===== -->
<div id="plc_i" class="page">
  <h2>PLC ANALOG ĐO DÒNG</h2>
  Zero: <input id="zi"> Span: <input id="si"> Raw: <input id="rawi">
  <button onclick="calcPLC_I()">Tính</button>
  <p id="plc_i_rs"></p>
  <button onclick="showPage('home')">Quay lại</button>
</div>

<!-- ===== PLC ÁP ===== -->
<div id="plc_v" class="page">
  <h2>PLC ANALOG ĐO ÁP</h2>
  Zero: <input id="zv"> Span: <input id="sv"> Raw: <input id="rawv">
  <button onclick="calcPLC_V()">Tính</button>
  <p id="plc_v_rs"></p>
  <button onclick="showPage('home')">Quay lại</button>
</div>

<script>
// ===== HIỂN THỊ THỜI GIAN THỰC =====
setInterval(() => {
  document.getElementById('time').innerText = new Date().toLocaleString();
}, 1000);

// ===== ĐIỀU HƯỚNG TRANG =====
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.style.display='none');
  document.getElementById(id).style.display='block';
}

// ===== PT100 (CÔNG THỨC ĐƠN GIẢN HÓA) =====
function calcPT100() {
  let Rab = parseFloat(rab.value);
  let Rbc = parseFloat(rbc.value);
  let R = Rab - Rbc; // loại bỏ điện trở dây
  let T = (R - 100) / 0.385; // gần đúng
  pt100_rs.innerText = "Nhiệt độ ≈ " + T.toFixed(2) + " °C";
}

// ===== TC K (GIẢN LƯỢC) =====
function calcTC() {
  let mvVal = parseFloat(mv.value);
  let ambVal = parseFloat(amb.value);
  let T = mvVal * 25 + ambVal;
  tc_rs.innerText = "Nhiệt độ ≈ " + T.toFixed(2) + " °C";
}

// ===== DCS =====
function calcAB() {
  let z = parseFloat(z1.value);
  let s = parseFloat(s1.value);
  let a = (s - z) / 0.016;
  let b = z - 0.004 * a;
  ab_rs.innerText = "a=" + a.toFixed(2) + ", b=" + b.toFixed(2);
}

// ===== PLC DÒNG =====
function calcPLC_I() {
  let z = parseFloat(zi.value);
  let s = parseFloat(si.value);
  let raw = parseFloat(rawi.value);
  let value = z + (s - z) * (raw / 27648);
  plc_i_rs.innerText = "Giá trị = " + value.toFixed(2);
}

// ===== PLC ÁP =====
function calcPLC_V() {
  let z = parseFloat(zv.value);
  let s = parseFloat(sv.value);
  let raw = parseFloat(rawv.value);
  let value = z + (s - z) * (raw / 27648);
  plc_v_rs.innerText = "Giá trị = " + value.toFixed(2);
}
</script>
</body>
</html>
