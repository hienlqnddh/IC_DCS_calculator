<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8"><link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>CÔNG CỤ HỖ TRỢ TÍNH TOÁN-CHUYỂN ĐỔI THÔNG SỐ DCS</h1>
    <div id="clock"></div>
    <div class="container">
        <h2>TÍNH TOÁN -CHUYỂN ĐỔI THÔNG SỐ CHO MODULE ANALOG PLC (đo dòng)</h2>
        
        <div class="input-group">
            <h3>Tính Scaling (Raw -> Thực)</h3>
            <label>Dạng module:</label>
            <select id="modeRaw">
                <option value="420">4-20mA</option>
                <option value="020">0-20mA</option>
            </select>
            <label>Zero:</label><input type="number" id="zR">
            <label>Span:</label><input type="number" id="sR">
            <label>Raw (0-27648):</label><input type="number" id="raw">
            <button onclick="calcScale()">Quy đổi Scaling</button>
            <div id="resScale" class="result"></div>
            <div class="tech-note">
                <b>Ví dụ:</b> Cảm biến áp suất 0-10 Bar. Dải Raw Siemens 0-27648.<br>
                <b>Công thức:</b> $Value = \frac{Raw}{27648} \times (Span - Zero) + Zero$.
            </div>
        </div>

        <div class="input-group">
            <h3>Tính Raw (Thực -> Raw)</h3>
            <label>Dạng module:</label>
            <select id="modeVal">
                <option value="420">4-20mA</option>
                <option value="020">0-20mA</option>
            </select>
            <label>Zero:</label><input type="number" id="zV">
            <label>Span:</label><input type="number" id="sV">
            <label>Giá trị Scaling:</label><input type="number" id="val">
            <button onclick="calcRaw()">Quy đổi Raw</button>
            <div id="resRaw" class="result"></div>
            <div class="tech-note">
                <b>Công thức:</b> $Raw = \frac{Value - Zero}{Span - Zero} \times 27648$.<br>
                Ghi chú: Dãy Raw module Siemens từ 0 đến 27648.
            </div>
        </div>
        <a href="index.html" class="btn-link btn-back">Quay lại trang chính</a>
    </div>
    <script>
        function updateClock() { document.getElementById('clock').innerText = new Date().toLocaleString('vi-VN'); }
        setInterval(updateClock, 1000); updateClock();
        function calcScale() {
            let res = (parseFloat(document.getElementById('raw').value) / 27648) * (parseFloat(document.getElementById('sR').value) - parseFloat(document.getElementById('zR').value)) + parseFloat(document.getElementById('zR').value);
            document.getElementById('resScale').innerText = "Scaling: " + res.toFixed(2);
        }
        function calcRaw() {
            let res = (parseFloat(document.getElementById('val').value) - parseFloat(document.getElementById('zV').value)) / (parseFloat(document.getElementById('sV').value) - parseFloat(document.getElementById('zV').value)) * 27648;
            document.getElementById('resRaw').innerText = "Raw: " + Math.round(res);
        }
    </script>
</body>
</html>
