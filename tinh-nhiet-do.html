<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Nhiệt Độ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="clock">...</div>
    <div class="container">
        <h1>CÔNG CỤ HỖ TRỢ TÍNH TOÁN-CHUYỂN ĐỔI THÔNG SỐ DCS</h1>
        <h2>TÍNH TOÁN CHUYỂN ĐỔI NHIỆT ĐỘ CỦA PT100, TC LOẠI K</h2>

        <div class="input-group">
            <h3>1. Chuyển đổi nhiệt độ RTD PT100 (3 dây)</h3>
            <label>Nhập Rab (Điện trở RTD + Dây) (Ohm):</label>
            <input type="number" id="pt100_Rab" placeholder="Ví dụ: 108">
            <label>Nhập Rbc (Điện trở dây bù) (Ohm):</label>
            <input type="number" id="pt100_Rbc" placeholder="Ví dụ: 0.5">
            <button onclick="calcPT100()">Tính Nhiệt Độ</button>
            <div class="result" id="res_pt100">Kết quả: ...</div>
            <div class="tech-note">
                <strong>Chú thích kỹ thuật:</strong><br>
                CT: R_sensor = Rab - 2*Rbc. Nhiệt độ T = (R_sensor - 100) / 0.385.
            </div>
        </div>

        <div class="input-group">
            <h3>2. Chuyển đổi TC loại K (Bù nhiệt môi trường)</h3>
            <label>Nhập Điện áp đo được (mV):</label>
            <input type="number" id="tc_mV" placeholder="Ví dụ: 4.096">
            <label>Nhập Nhiệt độ môi trường (°C):</label>
            <input type="number" id="tc_amb" placeholder="Ví dụ: 25">
            <button onclick="calcTCK()">Tính Nhiệt Độ</button>
            <div class="result" id="res_tck">Kết quả: ...</div>
            <div class="tech-note">
                <strong>Chú thích kỹ thuật:</strong><br>
                CT: V_total = V_đo + (T_mt * 0.041). T_lò = V_total / 0.041.
            </div>
        </div>

        <a href="index.html" class="btn-link btn-back">Quay lại trang chính</a>
    </div>

    <script>
        // Copy đoạn script đồng hồ vào đây để trang nào cũng chạy
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = "Thời gian thực: " + now.toLocaleString('vi-VN');
        }
        setInterval(updateClock, 1000); updateClock();

        function calcPT100() {
            let Rab = parseFloat(document.getElementById('pt100_Rab').value);
            let Rbc = parseFloat(document.getElementById('pt100_Rbc').value);
            if (isNaN(Rab) || isNaN(Rbc)) return;
            let R_sensor = Rab - (2 * Rbc);
            let Temp = (R_sensor - 100) / 0.385;
            document.getElementById('res_pt100').innerText = `R thực: ${R_sensor.toFixed(3)} Ω => Nhiệt độ: ${Temp.toFixed(2)} °C`;
        }

        function calcTCK() {
            let mV = parseFloat(document.getElementById('tc_mV').value);
            let amb = parseFloat(document.getElementById('tc_amb').value);
            if (isNaN(mV) || isNaN(amb)) return;
            let V_total = mV + (amb * 0.041);
            let Temp = V_total / 0.041;
            document.getElementById('res_tck').innerText = `Áp tổng: ${V_total.toFixed(3)} mV => Nhiệt độ: ${Temp.toFixed(2)} °C`;
        }
    </script>
</body>
</html>
